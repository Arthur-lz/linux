# PCI定义
PCI即Peripheral Component Interconnect，中文意思是“外围器件互联”，是由PCISIG (PCI Special Interest Group)推出的一种局部并行总线标准。PCI总线是由ISA(Industy Standard Architecture)总线发展而来的，ISA并行总线有8位和16位两种模式，时钟频率为8MHz，工作频率为33MHz/66MHz。是一种同步的独立于处理器的32位或64位局部总线。从结构上看，PCI是在CPU的供应商和原来的系统总线之间插入的一级总线，具体由一个桥接电路实现对这一层的管理，并实现上下之间的接口以协调数据的传送。从1992年创立规范到如今，PCI总线已成为了计算机的一种标准总线。已成为**局部总线的新标准，广泛用于当前高档微机、工作站，以及便携式微机。主要用于连接显示卡、网卡、声卡。PCI总线是32位同步复用总线。其地址和数据线引脚是AD31～AD0。PCI的工作频率为33MHz**。

### PCI总线结构
* PCI总线取代了早先的ISA总线。
* 专门用于显卡的AGP总线
* 现在的PCI Express总线

|标题|内容|说明|
|:-|:-|:-|
|树型结构|||
|独立于CPU总线|可以和CPU总线并行操作||
|PCI总线上可以挂接PCI设备和PCI桥片，PCI总线上只允许有一个PCI主设备，其他的均为PCI 从设备，而且读写操作只能在主从设备之间进行，从设备之间的数据交换需要通过主设备中转||
|PCI优点|即插即用(Plug and Play）、中断共享||
|数据宽度|32bit、64bit||
|总线速度|33MHz、66MHz||
|地址总线与数据总线是分时复用|数据传输时，由一个PCI设备做发起者（主控，Initiator或Master），而另一个PCI设备做目标（从设备， Target或Slave）。总线上的所有时序的产生与控制，都由Master来发起。PCI总线在同一时刻只能供一对设备完成传输，这就要求有一个仲裁机构（Arbiter），来决定在谁有权力拿到总线的主控权。||

### PCI总线特点
|标题|内容|说明|
|:-|:-|:-|
|数据宽度|32bit、64bit||
|总线速度/时钟频率|33MHz、66MHz||
|最大数据传输率132MB/s(264MB/s)||
|支持64位寻址||
|适应5V和3.3V电源环境||
|高速性|PCI局部总线以33MHz的时钟频率操作，采用32位数据总线，数据传输速率可高达132MB/s，远超过以往各种总线。而早在1995年6月推出的PCI总线规范2。l已定义了64位、66MHz的PCI总线标准。因此PCI总线完全可为未来的计算机提供更高的数据传送率。另外，PCI总线的主设备（Master）可与微机内存直接交换数据，而不必经过微机CPU中转，也提高了数据传送的效率|
|即插即用性|目前随着计算机技术的发展，微机中留给用户使用的硬件资源越来越少，也越来越含糊不清。在使用ISA板卡时，有两个问题需要解决：一是在同一台微机上使用多个不同厂家、不同型号的板卡时，板卡之间可能会有硬件资源上的冲突；二是板卡所占用的硬件资源可能会与系统硬件资源（如声卡、网卡等）相冲突。而PCI板卡的硬件资源则是由微机根据其各自的要求统一分配，决不会有任何的冲突问题。因此，作为PCI板卡的设计者，不必关心微机的哪些资源可用，哪些资源不可用，也不必关心板卡之间是否会有冲突。因此，即使不考虑PCI总线的高速性，单凭其即插即用性，就比ISA总线优越了许多|
|可靠性|PCI独立于处理器的结构，形成一种独特的中间缓冲器设计方式，将中央处理器子系统与外围设备分开。这样用户可以随意增添外围设备，以扩充电脑系统而不必担心在不同时钟频率下会导致性能的下降。与原先微机常用的ISA总线相比，PCI总线增加了奇偶校验错（PERR）、系统错（SERR）、从设备结束（STOP）等控制信号及超时处理等可靠性措施，使数据传输的可靠性大为增加|
|复杂性|PCI总线强大的功能大大增加了硬件设计和软件开发的实现难度。硬件上要采用大容量、高速度的CPLD或FPGA芯片来实现PCI总线复杂的功能。软件上则要根据所用的操作系统，用软件工具编制支持即插即用功能酶设备驱动程序|
|自动配置|**PCI总线规范规定PCI插卡可以自动配置。PCI定义了3种地址空间：存储器空间，输入输出空间和配置空间，每个PCI设备中都有256字节的配置空间用来存放自动配置信息，当PCI插卡插入系统，BIOS将根据读到的有关该卡的信息，结合系统的实际情况为插卡分配存储地址、中断和某些定时信息**|
|共享中断|PCI总线是采用低电平有效方式，多个中断可以共享一条中断线，而ISA总线是边沿触发方式|
|扩展性好|如果需要把许多设备连接到PCI总线上，而总线驱动能力不足时，可以采用多级PCI总线，这些总线上均可以并发工作，每个总线上均可挂接若干设备。因此PCI总线结构的扩展性是非常好的。由于PCI的设计是要辅助现有的扩展总线标准，因此与ISA，EISA及MCA总线完全兼容|
|多路复用|在PCI总线中为了优化设计采用了地址线和数据线共用一组物理线路，即多路复用。PCI接插件尺寸小，又采用了多路复用技术，减少了元件和管脚个数，提高了效率|
|严格规范|PCI总线对协议、时序、电气性能、机械性能等指标都有严格的规定，保证了PCI的可靠性和兼容性。由于PCI总线规范十分复杂，其接口的实现就有较高的技术难度|

### PCI配置空间-----实现自动配置的关键
